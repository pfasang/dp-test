# Migration `20200420143415`

This migration has been generated by Patrik FasÌŒang at 4/20/2020, 2:34:15 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "default$default"."Activity" DROP CONSTRAINT IF EXiSTS "Activity_projectId_fkey",
ALTER COLUMN "projectId" DROP NOT NULL;

ALTER TABLE "default$default"."ActivitySkill" DROP CONSTRAINT IF EXiSTS "ActivitySkill_ownerId_fkey",
ALTER COLUMN "ownerId" DROP NOT NULL;

ALTER TABLE "default$default"."Activity" ADD FOREIGN KEY ("projectId")REFERENCES "default$default"."Project"("id") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "default$default"."ActivitySkill" ADD FOREIGN KEY ("ownerId")REFERENCES "default$default"."Activity"("id") ON DELETE SET NULL  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200420143300..20200420143415
--- datamodel.dml
+++ datamodel.dml
@@ -3,28 +3,28 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 model Activity {
   id            String          @id @default(cuid())
   name          String
   startDate     DateTime
   endDate       DateTime?
-  project       Project        @relation(fields: [projectId], references: [id])
-  projectId     String
+  project       Project?        @relation(fields: [projectId], references: [id])
+  projectId     String?
   user          Profile?        @relation(fields: [userId], references: [user])
   userId        String?
   skills        ActivitySkill[]
 }
 model ActivitySkill {
   id        String    @id @default(cuid())
   level     Int
-  owner     Activity @relation(fields: [ownerId], references: [id])
-  ownerId   String
+  owner     Activity? @relation(fields: [ownerId], references: [id])
+  ownerId   String?
   skill     Skill?    @relation(fields: [skillId], references: [id])
   skillId   String?
 }
```


