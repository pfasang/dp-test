generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url = "***"
}

model Activity {
  id            String          @id @default(cuid())
  name          String
  startDate     DateTime
  endDate       DateTime?
  project       Project?        @relation(fields: [projectId], references: [id])
  projectId     String?
  user          Profile?        @relation(fields: [userId], references: [user])
  userId        String?
  skills        ActivitySkill[]
}

model ActivitySkill {
  id        String    @id @default(cuid())
  level     Int
  owner     Activity? @relation(fields: [ownerId], references: [id])
  ownerId   String?
  skill     Skill?    @relation(fields: [skillId], references: [id])
  skillId   String?
}

model Profile {
  user      String     @id
  firstName String
  lastName  String
  title     String?
  activities Activity[]
  skills    UserSkill[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Project {
  id          String     @id @default(cuid())
  name        String     @unique
  description String
  manager     Profile?   @relation(fields: [managerId], references: [user])
  managerId   String?
  startDate   DateTime
  endDate     DateTime?
  activities  Activity[]
}

model Skill {
  id            String          @id @default(cuid())
  name          String          @unique
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}

model UserSkill {
  id      String   @id @default(cuid())
  level   Int
  skill   Skill?   @relation(fields: [skillId], references: [id])
  skillId String?
  owner   Profile? @relation(fields: [ownerId], references: [user])
  ownerId String?
}
