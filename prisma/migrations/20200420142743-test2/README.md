# Migration `20200420142743-test2`

This migration has been generated by Patrik FasÌŒang at 4/20/2020, 2:27:43 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "default$default"."Activity" DROP CONSTRAINT IF EXiSTS "Activity_userId_fkey",
ALTER COLUMN "userId" DROP NOT NULL;

ALTER TABLE "default$default"."Activity" ADD FOREIGN KEY ("userId")REFERENCES "default$default"."Profile"("user") ON DELETE SET NULL  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200420122419-2004..20200420142743-test2
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 model Activity {
   id            String          @id @default(cuid())
@@ -13,10 +13,10 @@
   startDate     DateTime
   endDate       DateTime?
   project       Project        @relation(fields: [projectId], references: [id])
   projectId     String
-  user          Profile        @relation(fields: [userId], references: [user])
-  userId        String
+  user          Profile?        @relation(fields: [userId], references: [user])
+  userId        String?
   skills        ActivitySkill[]
 }
 model ActivitySkill {
@@ -28,9 +28,9 @@
   skillId   String
 }
 model Profile {
-  user      String     @id @default(cuid())
+  user      String     @id
   firstName String
   lastName  String
   title     String?
   activities Activity[]
```


